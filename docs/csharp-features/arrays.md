# Arrays

Array type is a special kind of type reference and is represented by `Coberec.ExprCS.ArrayType` record. It is member of `TypeReference` union and you can use it probably anywhere `TypeReference` is expected.

### Creating arrays

Array is created using `Coberec.ExprCS.Expression.NewArray` expression. For example, expression `new int[55]` can be generated by:

```csharp
Expression.NewArray(
    new ArrayType(TypeSignature.Int32, dimensions: 1),
    Expression.Constant(55)
)
```

Multidimensional array are created using the same method, just with more dimensions. `new int[1, 2, 3, 4, 5]` would be:

```csharp
Expression.NewArray(
    new ArrayType(TypeSignature.Int32, dimensions: 5),
    Expression.Constant(1),
    Expression.Constant(2),
    Expression.Constant(3),
    Expression.Constant(4),
    Expression.Constant(5)
)
```

### Accessing elements

Elements of a array are accessed using `Coberec.ExprCS.Expression.ArrayIndex` expression. Rather than having two different expression for reading and writing array elements, the `ArrayIndex` expression returns a reference that can be either dereferences (read) or assigned to (written to).

Reading an array element (`a[13]`):

```csharp
Expression.ArrayIndex(
    a,
    Expression.Constant(13)
).Dereference();
```

Writing an array element (`a[13] = "abc"`):

```csharp
Expression.ArrayIndex(
    a,
    Expression.Constant(13)
).ReferenceAssign(Expression.Constant("abc"));
```
